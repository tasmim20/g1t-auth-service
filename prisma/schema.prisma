datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

generator client {
  provider = "prisma-client-js"
}

enum Role {
  USER
  DRIVER
  ADMIN
}

model User {
  id           Int      @id @default(autoincrement())
  firstName    String
  lastName     String
  email        String   @unique
  mobileNumber String   @unique
  password     String
  role         Role     @default(USER) 
  photo        String?  // URL/path of uploaded photo
  isConfirmed  Boolean  @default(false) // For email confirmation // Can be USER, DRIVER, or ADMIN
  refreshToken String?
  otp          String?  // store the OTP temporarily
  otpExpiry    DateTime? // OTP expiration time
  createdAt    DateTime @default(now())
  updatedAt    DateTime @updatedAt
}

model Driver {
  id              Int      @id @default(autoincrement())
  firstName       String
  lastName        String
  email           String   @unique
  mobileNumber    String   @unique
  password        String
  role            Role     @default(DRIVER)
  drivingLicense  String   @unique
  photo          String?  // URL/path of uploaded photo
  isConfirmed     Boolean  @default(false)
  refreshToken String?
  otp          String?  // store the OTP temporarily
  otpExpiry    DateTime? // OTP expiration time
  createdAt       DateTime @default(now())
  updatedAt       DateTime @updatedAt   // Add this line
}

model Otp {
  id          Int      @id @default(autoincrement())
  emailOrPhone String
  otp         String
  expiresAt   DateTime
  isUsed      Boolean  @default(false)
  createdAt   DateTime @default(now())
}

